@using _1460353.Models
@using _1460353.Helpers
@model  List<sanpham>
@{ 
    ViewBag.Title = "Tim Kiem San Pham";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section css
{
<link href="~/bootstrap-select/dist/css/bootstrap-select.min.css" rel="stylesheet" />
}
@section js
{
<script src="~/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
}
@if (Model.Count == 0)
{
    <div id="snackbar" style="background-color:red;">
        <text>Không Có Sản Phẩm</text>
    </div>
   
}
else
{
    <div class="row">
        <form class="navbar-form navbar-left" method="get" action=@Url.Action("TimKiem", "Product")>
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search Theo Ten Trong Danh Muc" name="TuKhoa" value="@ViewBag.TuKhoa">
                <input type="hidden" name="page" value="1" />
                <select class="form-group selectpicker" name="iddm">
                    <option></option>
                    @foreach (var dm in ViewBag.listdm)
                    {
                        if (dm.id == ViewBag.iddm)
                        {
                            <option value="@dm.id" selected>@dm.ten</option>
                        }
                        else
                        {
                            <option value="@dm.id">@dm.ten</option>
                        }
                    }
                </select>
                <select class="form-group selectpicker" name="chon">
                    @if (ViewBag.Chon == 1)
                    {
                        <option value="1" selected>Sắp Xếp Theo Thời Gian</option>
                        <option value="2">Sắp Xếp Theo Giá</option>
                    }
                    else
                    {
                        <option value="1">Sắp Xếp Theo Thời Gian</option>
                        <option value="2" selected>Sắp Xếp Theo Giá</option>
                    }
                </select>
                <button type="submit" class="btn btn-default">
                    <i class="glyphicon glyphicon-search"></i>
                </button>
            </div>
        </form>
    </div>
 
        <div class="row">
            @foreach (var p in Model)
            {
                <div class="col-md-3">
                    <div class="thumbnail ">
                        <img src="@p.hinh1" alt="@p.ten">
                        <div class="caption">
                            <h5>@p.ten</h5>
                            <h5>Giá Khởi Điểm : @string.Format("{0:N0}", p.giakhoidiem)</h5>
                            <h5>Giá Hiện Tại : @string.Format("{0:N0}", p.giahientai)</h5>
                            <h5>Giá Mua Ngay : @string.Format("{0:N0}", p.giamuangay)</h5>
                            <h5>Miêu Tả Ngắn Sản Phẩm </h5>
                            <p class="txtover">@p.mieutangan</p>
                            <p>
                                <a href=@Url.Action("ChiTiet","Product",new {id=p.id }) class="btn btn-default" role="button">Chi Tiết</a>
                                @*@if (Login.IsLogged() == true)
                                    {
                                        <a href="javascript:;" class="btn btn-success addItem" role="button" data-id="@p.ProID">
                                            <i class="fa fa-cart-plus"></i>
                                            Đặt Mua
                                        </a>
                                    }*@
                            </p>
                        </div>
                    </div>
                </div>
            }
        </div>
    
    <nav aria-label="Page navigation">
        <ul class="pagination">
            <li>
                <a href="@Url.Action("TimKiem","Product",new {TuKhoa=ViewBag.TuKhoa,page=((ViewBag.CurPage>1)?ViewBag.CurPage-1 : 1),iddm=ViewBag.iddm,chon=ViewBag.Chon})" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            @for (int i = 1; i <= ViewBag.Pages; i++)
                {
                    if (ViewBag.CurPage == i)
                    {
                    <li class="active"><a href="@Url.Action("TimKiem","Product",new { TuKhoa = ViewBag.TuKhoa, page = i ,iddm=ViewBag.iddm,chon=ViewBag.Chon})">@i</a></li>
                }
                else
                {
                    <li><a href="@Url.Action("TimKiem","Product",new { TuKhoa = ViewBag.TuKhoa, page = i ,iddm=ViewBag.iddm,chon=ViewBag.Chon})">@i</a></li>
                }
            }
            <li>

                    <a href="@Url.Action("TimKiem","Product",new {TuKhoa=ViewBag.TuKhoa,page=((ViewBag.CurPage<ViewBag.Pages)?ViewBag.CurPage+1 : ViewBag.Pages),iddm=ViewBag.iddm,chon=ViewBag.Chon})" aria-label="Previous">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
            </li>
        </ul>
    </nav>
}